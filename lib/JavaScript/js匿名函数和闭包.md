[>>>上一篇：jsDOM监听器](../../lib/JavaScript/jsDOM监听器.md)
## js 匿名函数和闭包
---
### 匿名函数
函数是JavaScript中最灵活的一种对象，这里只是讲解其匿名函数的用途。  
匿名函数是一种在运行时动态声明的函数。它们之所以被称为匿名函数是因为不同于普通函数，它们并没有函数名。

```
(function() {
alert('water');
})();
```
**当然也可以带参数：**  
```
(function(a) {
alert(a);
})('water');
```

- **不取名字的函数**  
    不需要给匿名函数设定一个名字只是为了方便，当该函数只在这程序只会被调用一次的时候，匿名函数最便捷。  
    更多时候是被当作参数来使用。
    ```
    //就比如上一节的监听器
    element.addEventListener("event", function(){
      //TODO...
    });
    ```

- **取名字的函数**  
    有名函数可以方便被调用。这在需要被重复调用以及递归函数中很有用。  
    这对于调试也有用，因为你可以在调用栈中看到函数的名字。
    >**小技巧**  
    打开浏览器**F12开发者工具**，在**console**栏中直接输入函数名，按下回车键后，能立马查看到该函数的内容和位置。

### 闭包
**闭包的概念：**闭包是指有权访问另一个函数作用域中的变量的函数，创建闭包的常见的方式，就是在 一个函数内部创建另一个函数，通过另一个函数访问这个函数的局部变量。  
>※可以先跳过这部分内容，等有更过开发经验后，会更容易理解。

```
function a(){
     var name='sun';
       return function (){     //通过匿名函数返回 a()局部变量
           return name;
         }
}    
  alert(a()());         //通过a()()来直接调用匿名函数返回值


  var b=a();
  alert(b());          //另一种调用匿名函数返回值
```
使用闭包有一个优点，也是它的缺点：就是可以把局部变量驻留在内存中，可以避免使 用全局变量。  
(全局变量污染导致应用程序不可预测性，每个模块都可调用必将引来灾难， 所以推荐使用私有的，封装的局部变量)。

#### 闭包的经典案例
```
//**********************正常调用**********************//
var num=0;                   //全局变量
function a(){
  num++;                     //模块级可以调用全局变量，进行累加
}
  a();   //num = 1
  a();   //num = 2           //执行函数，累加了
  alert(num);                //输出全局变量

//**********************正常调用**********************//

//******************通过另一个函数访问******************//
function a(){
      var num=0;
      num++;
      return num;
}
alert(a());       //num = 1
alert(a());       //num = 1         //无法实现累加，因为局部变量又被初始化了
//******************通过另一个函数访问******************//
```

**注意：**由于闭包里作用域返回的局部变量资源不会被立刻销毁回收，所以可能会占用更 多的内存。过度使用闭包会导致性能下降，建议在非常有必要的时候才使用闭包。

HTML/CSS/JS 在线工具https://c.runoob.com/front-end/61

[>>>下一篇：js回调函数](../../lib/JavaScript/js回调函数.md)
